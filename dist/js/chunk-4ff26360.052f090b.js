(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ff26360"],{"0d67":function(e,t,o){},"4fe4":function(e,t,o){"use strict";var r=o("0d67"),s=o.n(r);s.a},"72ce":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search"},[o("Row",[o("Col",[o("Card",[o("Row",{nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}}},[o("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":70}},[o("Form-item",{attrs:{label:"订单id",prop:"orderId"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入订单id",clearable:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1),e.drop?o("span",[o("Form-item",{attrs:{label:"用户名",prop:"username"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入用户名",clearable:""},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),o("Form-item",{attrs:{label:"商品名",prop:"title"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品名",clearable:""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),o("Form-item",{attrs:{label:"创建时间",prop:"createTime"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入创建时间",clearable:""},model:{value:e.searchForm.createTime,callback:function(t){e.$set(e.searchForm,"createTime",t)},expression:"searchForm.createTime"}})],1),o("Form-item",{attrs:{label:"商品数量",prop:"number"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入商品数量",clearable:""},model:{value:e.searchForm.number,callback:function(t){e.$set(e.searchForm,"number",t)},expression:"searchForm.number"}})],1),o("Form-item",{attrs:{label:"订单总价",prop:"money"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入订单总价",clearable:""},model:{value:e.searchForm.money,callback:function(t){e.$set(e.searchForm,"money",t)},expression:"searchForm.money"}})],1),o("Form-item",{attrs:{label:"收货地址",prop:"address"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入收货地址",clearable:""},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1),o("Form-item",{attrs:{label:"订单状态",prop:"status"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入订单状态",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}})],1)],1):e._e(),o("Form-item",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[o("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),o("Button",{on:{click:e.handleReset}},[e._v("重置")]),o("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v(" "+e._s(e.dropDownContent)+" "),o("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1),o("Row",{staticClass:"operation"},[o("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加订单")]),o("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),o("Dropdown",{on:{"on-click":e.handleDropdown}},[o("Button",[e._v(" 更多操作 "),o("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"refresh"}},[e._v("刷新")]),o("DropdownItem",{attrs:{name:"reset"}},[e._v("重置订单密码")]),o("DropdownItem",{attrs:{name:"exportData"}},[e._v("导出所选数据")]),o("DropdownItem",{attrs:{name:"exportAll"}},[e._v("导出全部数据")]),o("DropdownItem",{attrs:{name:"importData"}},[e._v("导入数据")])],1)],1)],1),o("Row",[o("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),o("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" 项 "),o("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])])],1),o("Row",[o("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}})],1),o("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),o("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[o("Form",{ref:"form",attrs:{model:e.form,"label-width":100,rules:e.formValidate}},[o("Form-item",{attrs:{label:"用户名",prop:"username"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入用户名",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),o("Form-item",{attrs:{label:"商品名",prop:"title"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入商品名",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("Form-item",{attrs:{label:"创建时间",prop:"createTime"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入创建时间",clearable:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1),o("Form-item",{attrs:{label:"商品数量",prop:"number"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入商品数量",clearable:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),o("Form-item",{attrs:{label:"订单总价",prop:"money"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入订单总价",clearable:""},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1),o("Form-item",{attrs:{label:"收货地址",prop:"address"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入收货地址",clearable:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),o("Form-item",{attrs:{label:"订单状态",prop:"status"}},[o("Input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入订单状态",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),o("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1),o("Modal",{attrs:{title:e.exportTitle,loading:e.loadingExport},on:{"on-ok":e.exportCustomData},model:{value:e.exportModalVisible,callback:function(t){e.exportModalVisible=t},expression:"exportModalVisible"}},[o("Form",{ref:"exportForm",attrs:{"label-width":85}},[o("FormItem",{attrs:{label:"导出文件名"}},[o("Input",{model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),o("FormItem",{attrs:{label:"自定义导出列"}},[o("CheckboxGroup",{model:{value:e.chooseColumns,callback:function(t){e.chooseColumns=t},expression:"chooseColumns"}},e._l(e.exportColumns,(function(e,t){return o("Checkbox",{key:t,attrs:{label:e.title,value:e.checked,disabled:e.disabled}})})),1)],1)],1)],1),o("Drawer",{attrs:{title:"导入数据",closable:"",width:"1000"},model:{value:e.importModalVisible,callback:function(t){e.importModalVisible=t},expression:"importModalVisible"}},[o("Upload",{attrs:{action:"","before-upload":e.beforeUploadImport,accept:".xls, .xlsx"}},[o("Button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传Excel文件")]),""!=e.uploadfile.name?o("span",[e._v("当前选择文件："+e._s(e.uploadfile.name))]):e._e()],1),o("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("导入前请下载查看导入模版数据文件，确保数据格式正确，不得修改列英文名称。必需数据字段：订单名(唯一)、密码(明文)")]),o("Table",{ref:"importTable",attrs:{columns:e.importColumns,border:"",height:e.height,data:e.importTableData}}),o("div",{staticClass:"drawer-footer"},[o("Button",{staticStyle:{position:"absolute",left:"15px"},attrs:{type:"info"},on:{click:e.downloadTemple}},[e._v("下载导入模板")]),o("Button",{on:{click:function(t){e.importModalVisible=!1}}},[e._v("关闭")]),o("Button",{staticStyle:{"margin-left":"5px"},attrs:{loading:e.importLoading,disabled:e.importTableData.length<=0,type:"primary"},on:{click:e.importData}},[e._v(" 确认导入 "),e.importTableData.length>0?o("span",[e._v(e._s(e.importTableData.length)+" 条数据")]):e._e()])],1)],1),o("check-password",{ref:"checkPass",on:{"on-success":e.resetPass}})],1)},s=[],a=(o("4160"),o("caad"),o("d81d"),o("4e82"),o("b0c0"),o("a9e3"),o("ac1f"),o("2532"),o("1276"),o("159b"),o("7f80")),i=function(e){return Object(a["b"])("/order/getByCondition",e)},l=function(e){return Object(a["b"])("/order/getAll",e)},n=function(e){return Object(a["c"])("/order/add",e)},c=function(e,t){return Object(a["a"])("/order/delByIds/".concat(e),t)},d=function(e,t){return Object(a["c"])("/order/dealWith",e,t)},m=(o("10fd"),o("f6c5")),u=o("51a6"),h=[{title:"订单id",key:"orderId"},{title:"用户名",key:"username"},{title:"商品名",key:"title"},{title:"创建时间",key:"createTime"},{title:"商品数量",key:"number"},{title:"订单总价",key:"money"},{title:"收货地址",key:"address"},{title:"订单状态",key:"status"}],p=o("0a21"),f={name:"OrderManage",components:{checkPassword:m["a"]},data:function(){var e=this;return{height:510,loading:!0,importLoading:!1,loadingExport:!0,exportModalVisible:!1,importModalVisible:!1,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",selectCount:0,selectList:[],searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",type:"0"},modalType:0,modalVisible:!1,modalTitle:"",form:{orderId:"",username:"",title:"",createTime:"",number:"",money:"",address:"",status:""},formValidate:{},submitLoading:!1,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"订单id",key:"orderId",minWidth:120,sortable:!1},{title:"用户名",key:"username",minWidth:120,sortable:!1},{title:"商品名",key:"title",minWidth:120,sortable:!1},{title:"创建时间",key:"createTime",minWidth:120,sortable:!1},{title:"商品数量",key:"number",minWidth:120,sortable:!1},{title:"订单总价",key:"money",minWidth:120,sortable:!1},{title:"收货地址",key:"address",minWidth:120,sortable:!1},{title:"订单状态",key:"status",minWidth:120,sortable:!1},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(t,o){var r="";return r="未禁用"==o.row.state?t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.dealWith(o.row)}}},"未禁用"):t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"}},"已禁用"),t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.edit(o.row)}}},"编辑"),r,t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(o.row)}}},"删除")])}}],exportColumns:h,chooseColumns:[],filename:"订单",exportTitle:"确认导出",exportType:"",importTableData:[],importColumns:[],uploadfile:{name:""},tempColumns:u["orderColumns"],tempData:u["orderData"],data:[],exportData:[],total:0,dictSex:this.$store.state.dict.sex}},methods:{init:function(){var e=this;this.getOrderList();var t=[];this.exportColumns.forEach((function(o){e.getStore("roles").includes("ROLE_ADMIN")||"mobile"!=o.key?o.disabled=!1:(o.title="[无权导出] "+o.title,o.disabled=!0),t.push(o.title)})),this.chooseColumns=t},handleSelectDepTree:function(e){this.form.departmentId=e[0]},handleSelectDep:function(e){this.searchForm.departmentId=e},changePage:function(e){this.searchForm.pageNumber=e,this.getOrderList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getOrderList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},getOrderList:function(){var e=this;this.loading=!0,this.searchForm.type||(this.searchForm.type=""),this.searchForm.status||(this.searchForm.status=""),i(this.searchForm).then((function(t){console.log(t),e.loading=!1,t.success&&(e.data=t.result.content,e.total=t.result.totalElements)}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getOrderList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.$refs.dep.clearSelect(),this.searchForm.departmentId="",this.getOrderList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getOrderList()},getRoleList:function(){var e=this;getAllRoleList().then((function(t){t.success&&(e.roleList=t.result)}))},handleDropdown:function(e){var t=this;if("refresh"==e)this.getOrderList();else if("reset"==e){if(this.selectCount<=0)return void this.$Message.warning("您还未选择要重置密码的订单");this.$refs.checkPass.show()}else if("exportData"==e){if(this.selectCount<=0)return void this.$Message.warning("您还未选择要导出的数据");this.exportType="part",this.exportModalVisible=!0,this.exportTitle="确认导出 "+this.selectCount+" 条数据 "}else"exportAll"==e?(this.exportType="all",this.exportModalVisible=!0,this.exportTitle="确认导出全部 "+this.total+" 条数据 ",l().then((function(e){e.success&&(t.exportData=e.result)}))):"importData"==e&&(this.importModalVisible=!0)},resetPass:function(){var e=this;this.$Modal.confirm({title:"确认重置",content:"您确认要重置所选的 "+this.selectCount+" 条订单数据密码为【123456】?",loading:!0,onOk:function(){var t="";e.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),resetOrderPass({ids:t}).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.clearSelectAll(),e.getOrderList())}))}})},exportCustomData:function(){var e=this;""==this.filename&&(this.filename="订单 ");var t=[];this.exportColumns.forEach((function(o){e.chooseColumns.forEach((function(e){o.title!=e||o.disabled||t.push(o)}))})),this.exportColumns=t,this.exportModalVisible=!1;var o=[],r=[];this.exportColumns.forEach((function(e){o.push(e.title),r.push(e.key)}));var s={title:o,key:r,data:this.exportData,autoWidth:!0,filename:this.filename};p["a"].export_array_to_excel(s)},beforeUploadImport:function(e){this.uploadfile=e;var t=e.name.split(".").pop().toLocaleLowerCase();return"xlsx"==t||"xls"==t?(this.readFile(e),this.file=e):this.$Notice.warning({title:"文件类型错误",desc:"所选文件‘ "+e.name+" ’不是EXCEL文件，请选择后缀为.xlsx或者.xls的EXCEL文件。"}),!1},readFile:function(e){var t=this,o=new FileReader;o.readAsArrayBuffer(e),o.onerror=function(e){t.$Message.error("文件读取出错")},o.onload=function(e){t.$Message.success("读取数据成功");var o=e.target.result,r=p["a"].read(o,"array"),s=r.header,a=r.results,i=s.map((function(e){return{title:e,key:e}}));t.importTableData=a,t.importColumns=i}},downloadTemple:function(){var e=[],t=[];u["orderColumns"].forEach((function(o){e.push(o.title),t.push(o.key)}));var o={title:e,key:t,data:u["orderData"],autoWidth:!0,filename:"导入订单模板"};p["a"].export_array_to_excel(o)},importData:function(){var e=this;this.importLoading=!0,importOrderData(this.importTableData).then((function(t){e.importLoading=!1,t.success&&(e.importModalVisible=!1,e.getOrderList(),e.$Modal.info({title:"导入结果",content:t.message}))}))},cancelOrder:function(){this.modalVisible=!1},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){console.log(t),t&&(0==e.modalType?(delete e.form.id,delete e.form.status,delete e.form.orderId,delete e.form.mobile,e.submitLoading=!0,n(e.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getOrderList(),e.modalVisible=!1)}))):(e.submitLoading=!0,editOrder(e.form).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.getOrderList(),e.modalVisible=!1)}))))}))},handleUpload:function(e){this.form.avatar=e},add:function(){this.modalType=0,this.modalTitle="添加订单 ",this.$refs.form.resetFields(),this.modalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑订单 ",this.$refs.form.resetFields(),e)null==e[t]&&(e[t]="");var o=JSON.stringify(e),r=JSON.parse(o);this.form=r;var s=[];this.form.roles.forEach((function(e){s.push(e.id)})),this.form.roles=s,this.modalVisible=!0},enable:function(e){var t=this;this.$Modal.confirm({title:"确认启用",content:"您确认要启用订单 "+e.ordername+" ?",loading:!0,onOk:function(){enableOrder(e.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getOrderList())}))}})},disable:function(e){var t=this;this.$Modal.confirm({title:"确认禁用",content:"您确认要禁用订单 "+e.ordername+" ?",loading:!0,onOk:function(){disableOrder(e.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.getOrderList())}))}})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除订单 : "+e.content+" ?",loading:!0,onOk:function(){c(e.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.getOrderList())}))}})},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},showSelect:function(e){this.exportData=e,this.selectList=e,this.selectCount=e.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var e=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var t="";e.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),c(t).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("删除成功"),e.clearSelectAll(),e.getOrderList())}))}})},dealWith:function(e){var t=this;this.$Modal.confirm({title:"确认处理",content:"您确认要处理订单 : "+e.content+" ?",loading:!0,onOk:function(){d(e.id,{id:e.id}).then((function(o){console.log(e,e.id,o),t.$Modal.remove(),o.success&&(t.$Message.success("处理成功"),t.getOrderList())}))}})}},mounted:function(){this.height=Number(document.documentElement.clientHeight-230),this.init()}},b=f,g=(o("4fe4"),o("2877")),y=Object(g["a"])(b,r,s,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-4ff26360.052f090b.js.map